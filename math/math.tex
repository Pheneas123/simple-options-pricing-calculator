\documentclass[12pt,a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{bm}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{xcolor}

\geometry{margin=1in}
\setlength{\parskip}{6pt}
\setlength{\parindent}{0pt}

\hypersetup{
  colorlinks = true,
  linkcolor = blue,
  citecolor = blue,
  urlcolor  = blue,
  pdftitle  = {Options Calculator Maths},
  pdfauthor = {Pheneas Newman}
}
\usepackage{pagecolor}
\definecolor{darkbg}{HTML}{1E1E1E} 
\pagecolor{darkbg}    
\definecolor{darkfont}{HTML}{CCCCCC}
\color{darkfont}         
\definecolor{blue1}{HTML}{9CDCFE}
\definecolor{purple1}{HTML}{C586C0}

\begin{document}

\title{Mathematics Behind the Options Calculator}
\author{Pheneas Newman}
\date{\today}
\maketitle

\section{European Call}

\[
  \begin{aligned}
    C   & = S e^{-qT} \Phi(d_1) - K e^{-rT} \Phi(d_2) \\ 
    d_1 & = \frac{\ln\!\left(\tfrac{S}{K}\right) + (r - q + \tfrac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} \\
    d_2 & = d_1 - \sigma \sqrt{T}
  \end{aligned}
\]

\begin{description}
  \item[$C$] Option price
  \item[$S$] Spot price
  \item[$K$] Strike price
  \item[$q$] Dividend rate
  \item[$T$] Time to maturity
  \item[$r$] Risk-free rate
  \item[$\sigma$] Volatility
  \item[$\Phi$] Standard normal CDF
  \item[$\phi$] Standard normal pdf
\end{description}

\subsection{Delta}
\[
  \boxed{\Delta = \frac{\partial C}{\partial S} = e^{-qT}\Phi(d_1)}
\]

\[
  \begin{aligned}
    \Delta & = \frac{\partial C}{\partial S} = e^{-qT}\Phi(d_1) + Se^{-q T}\phi(d_1)\left(\frac{\partial d_1}{\partial S}\right) - Ke^{-rT}\phi(d_2)\left(\frac{\partial d_2}{\partial S} \right) \\
           & = e^{-qT}\Phi(d_1) + \underbrace{Se^{-qT}\phi(d_1)\frac{1}{S \sigma \sqrt{T}} - Ke^{-rT}\phi(d_2)\frac{1}{S \sigma \sqrt{T}}}_{=\,0} \\
    \Delta & = e^{-qT}\Phi(d_1)
  \end{aligned}
\]

\subsection{Gamma}

\[
  \boxed{\Gamma = \frac{\partial^2 C}{\partial S^2} = e^{-qT}(\phi(d_1)\frac{1}{S\sigma\sqrt{T}}) }
\]

\[
  \begin{aligned}
    \Gamma & = \frac{\partial^2 C}{\partial S^2} = \frac{\partial \Delta}{\partial S} \\
           & = e^{-qT}\frac{\partial}{\partial S}(\Phi(d_1)) \\
    \Gamma & = e^{-qT}\phi(d_1)\frac{1}{S\sigma\sqrt{T}} \\
  \end{aligned}
\]

\subsection{Vega}

\[
\boxed{\nu = \frac{\partial C}{\partial \sigma} = Se^{-qT}\phi(d_1)\sqrt{T}}
\]

\[
  \begin{aligned}
    \nu & = \frac{\partial C}{\partial \sigma} 
          = Se^{-qT}\phi(d_1)\left(\frac{\partial d_1}{\partial \sigma}\right) 
            - K e ^{-r T} \phi(d_2) \left(\frac{\partial d_2}{\partial \sigma}\right) \\
    & \textcolor{purple1}{\frac{\partial d_1}{\partial \sigma} 
      = \frac{\partial}{\partial \sigma}\left(\frac{\ln(\tfrac{S}{K})}{\sigma \sqrt{T}} 
        + \frac{T(r - q)}{\sigma \sqrt{T}} \right) + \frac{1}{2} \sqrt{T}}  \\[6pt]
    & \textcolor{blue1}{\frac{\partial d_2}{\partial \sigma} 
      = \frac{\partial}{\partial \sigma}\left(\frac{\ln(\tfrac{S}{K})}{\sigma \sqrt{T}} 
        + \frac{T(r - q)}{\sigma \sqrt{T}} \right) - \frac{1}{2} \sqrt{T}} \\[6pt]
    & \underbrace{\frac{\partial d_1}{\partial \sigma} 
      - \frac{\partial d_2}{\partial \sigma}}_{\text{these terms cancel}} 
      = \sqrt{T} \\
    \nu & = Se^{-qT} \phi(d_1) \sqrt{T} \\
  \end{aligned}
\]

\subsection{Theta}
\[
\boxed{\Theta = 35} \\
\]
\[
  \begin{aligned}
    \Theta & = \frac{\partial C}{\partial T} = S\left(-qe^{-qT} \Phi(d_1) + e^{-qT} \phi(d_1) \frac{\partial d_1}{\partial T}\right) - K \left(-re^{-rT} \Phi(d_2) +e ^{-rT} \phi(d_2) -\frac{\partial d_2}{\partial T} \right) \\
  \end{aligned}
\]

\subsection{Rho}

\[
  \begin{aligned}
  \end{aligned}
\]

\section{European Put}

\[
  \begin{aligned}
    P   & = K e^{-rT}\,\Phi(-d_2) \;-\; S e^{-qT}\,\Phi(-d_1) \\
    d_1 & = \frac{\ln\!\left(\tfrac{S}{K}\right) + (r - q + \tfrac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} \\
    d_2 & = d_1 - \sigma \sqrt{T}
  \end{aligned}
\]

\begin{description}
  \item[$P$] Option price
  \item[$S$] Spot price
  \item[$K$] Strike price
  \item[$q$] Dividend rate
  \item[$T$] Time to maturity
  \item[$r$] Risk-free rate
  \item[$\sigma$] Volatility
  \item[$\Phi$] Standard normal CDF
  \item[$\phi$] Standard normal pdf
\end{description}

\subsection{Delta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Gamma}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Vega}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Theta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Rho}
\[
  \begin{aligned}
  \end{aligned}
\]

\section{Binary Call (Cash-or-Nothing)}

\[
  \begin{aligned}
    C_{\mathrm{bin}} & = Q \, e^{-rT} \,\Phi(d_2) \\
    d_1 & = \frac{\ln\!\left(\tfrac{S}{K}\right) + (r - q + \tfrac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} \\
    d_2 & = d_1 - \sigma \sqrt{T}
  \end{aligned}
\]

\subsection{Delta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Gamma}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Vega}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Theta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Rho}
\[
  \begin{aligned}
  \end{aligned}
\]

\section{Binary Put (Cash-or-Nothing)}

\[
  \begin{aligned}
    P_{\mathrm{bin}} & = Q \, e^{-rT} \,\Phi(-d_2) \\ 
    d_1 & = \frac{\ln\!\left(\tfrac{S}{K}\right) + (r - q + \tfrac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} \\
    d_2 & = d_1 - \sigma \sqrt{T}
  \end{aligned}
\]

\subsection{Delta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Gamma}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Vega}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Theta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Rho}
\[
  \begin{aligned}
  \end{aligned}
\]

\section{American Call}

\[
  \begin{aligned}
    C^{A} & = \sup_{\tau \in \mathcal{T}[0,T]} \mathbb{E}^{\mathbb{Q}}\!\left[ e^{-r \tau}\,(S_{\tau}-K)^{+} \right] \\
          & \quad \text{(equals the European call when $q=0$, since early exercise has no value).}
  \end{aligned}
\]

\subsection{Delta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Gamma}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Vega}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Theta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Rho}
\[
  \begin{aligned}
  \end{aligned}
\]

\section{American Put}

\[
  \begin{aligned}
    P^{A} & = \sup_{\tau \in \mathcal{T}[0,T]} \mathbb{E}^{\mathbb{Q}}\!\left[ e^{-r \tau}\,(K-S_{\tau})^{+} \right]
  \end{aligned}
\]

\subsection{Delta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Gamma}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Vega}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Theta}
\[
  \begin{aligned}
  \end{aligned}
\]

\subsection{Rho}
\[
  \begin{aligned}
  \end{aligned}
\]

\end{document}
